# =====================================================
# OpenRouter é…ç½®ç¤ºä¾‹ - Claude 3.5 Sonnet
# é€‚ç”¨äº: Magentic-UI + OpenRouter API
# =====================================================

######################################
# æ ¸å¿ƒæ¨¡å‹é…ç½® - OpenRouter Claude    #
######################################
model_config: &client
  provider: autogen_ext.models.openai.OpenAIChatCompletionClient
  config:
    model: anthropic/claude-3-5-sonnet-20241022
    api_key: $OPENROUTER_API_KEY
    base_url: https://openrouter.ai/api/v1
    timeout: 120.0
    max_retries: 5
    # ğŸ”§ å¢å¼ºç½‘ç»œè¿æ¥ç¨³å®šæ€§é…ç½®
    http_client_config:
      connect: 30.0  # è¿æ¥è¶…æ—¶30ç§’
      read: 90.0     # è¯»å–è¶…æ—¶90ç§’
      write: 30.0    # å†™å…¥è¶…æ—¶30ç§’
      pool: 60.0     # è¿æ¥æ± è¶…æ—¶60ç§’
    retry_config:
      max_retries: 5
      exponential_base: 2
      jitter: true
      max_delay: 60.0
      retry_on_timeout: true
      retry_on_connection_error: true
    model_info:
      vision: true
      function_calling: true
      json_output: false
      family: claude-3-5-sonnet
      structured_output: false
      multiple_system_messages: false
    default_headers:
      HTTP-Referer: https://magentic-ui.local
      X-Title: Magentic-UI-Development
    extra_body:
      temperature: 0.7
      max_tokens: 4096
      top_p: 0.9

######################################
# å›¾åƒç”Ÿæˆä¸“ç”¨é…ç½® - ä½¿ç”¨OpenAIå®˜æ–¹API #
######################################
image_generation_client: &image_client
  provider: direct_openai_image_client  # ä¸“ç”¨å›¾åƒç”Ÿæˆå®¢æˆ·ç«¯æ ‡è¯†
  config:
    model: dall-e-3  # æ”¯æŒ: dall-e-3, dall-e-2
    api_key: $OPENAI_API_KEY  # âœ… å¿…é¡»ä½¿ç”¨çœŸæ­£çš„OpenAI APIå¯†é’¥ï¼ŒOpenRouterä¸æ”¯æŒå›¾åƒç”Ÿæˆ
    base_url: https://api.openai.com/v1  # âœ… å¿…é¡»ä½¿ç”¨OpenAIå®˜æ–¹API
    timeout: 120.0
    max_retries: 5
    # ğŸ”§ å¢å¼ºç½‘ç»œè¿æ¥ç¨³å®šæ€§é…ç½®
    http_client_config:
      connect: 30.0  # è¿æ¥è¶…æ—¶30ç§’
      read: 90.0     # è¯»å–è¶…æ—¶90ç§’
      write: 30.0    # å†™å…¥è¶…æ—¶30ç§’
      pool: 60.0     # è¿æ¥æ± è¶…æ—¶60ç§’
    retry_config:
      max_retries: 5
      exponential_base: 2
      jitter: true
      max_delay: 60.0
      retry_on_timeout: true
      retry_on_connection_error: true
    model_info:
      image_generation: true  # æ˜ç¡®æ ‡è¯†ä¸ºå›¾åƒç”Ÿæˆ
      supported_formats: ["png", "webp"]
      quality_levels: ["standard", "hd"]
      style_options: ["natural", "vivid"]
      max_resolution: "1792x1024"
      function_calling: false
      json_output: false
    default_headers:
      HTTP-Referer: https://magentic-ui.local
      X-Title: Magentic-UI-ImageGen
    extra_body:
      response_format: "b64_json"  # "url" or "b64_json"
      quality: "standard"          # "standard" or "hd"
      style: "vivid"              # "natural" or "vivid" (ä»…DALL-E 3)
      size: "1024x1024"           # é»˜è®¤å°ºå¯¸

######################################
# å„ä»£ç†ä¸“ç”¨é…ç½®                      #
######################################

orchestrator_client: *client
coder_client: *client
web_surfer_client: *client
file_surfer_client: *client
action_guard_client: *client
image_generator: *image_client

######################################
# åº”ç”¨ç¨‹åºé…ç½®                        #
######################################

cooperative_planning: true
autonomous_execution: false
allow_follow_up_input: true
max_actions_per_step: 8
multiple_tools_per_call: true
max_turns: 50
model_context_token_limit: 200000
approval_policy: auto-conservative
action_guard_enabled: true
require_authentication: false
allowed_websites: []
browser_headless: false
browser_local: false
playwright_port: -1
novnc_port: -1
inside_docker: true
run_without_docker: false
allow_for_replans: true
do_bing_search: false
websurfer_loop: false
retrieve_relevant_plans: never 